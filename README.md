# kubectl plugin flags
Example kubectl plugin that dumps all flags passed in. Useful when learning
how to build your own plugin.

## Install the plugin

```console
$ curl -sLO https://github.com/carolynvs/kubectl-flags-plugin/releases/download/latest/flags.zip

$ unzip flags.zip -d ~/.kube/plugins/
Archive:  flags.zip
   creating: ~/.kube/plugins/flags/
  inflating: ~/.kube/plugins/flags/plugin.yaml
```

## Try the plugin

```console
$ make test
kubectl plugin flags --foo=bar --output=json | grep KUBECTL
KUBECTL_PLUGINS_GLOBAL_FLAG_TOKEN=
KUBECTL_PLUGINS_GLOBAL_FLAG_PASSWORD=
KUBECTL_PLUGINS_GLOBAL_FLAG_CLIENT_CERTIFICATE=
KUBECTL_PLUGINS_GLOBAL_FLAG_CACHE_DIR=~/.kube/http-cache
KUBECTL_PLUGINS_GLOBAL_FLAG_KUBECONFIG=
KUBECTL_PLUGINS_GLOBAL_FLAG_AS_GROUP=[]
KUBECTL_PLUGINS_GLOBAL_FLAG_CLUSTER=
KUBECTL_PLUGINS_GLOBAL_FLAG_USERNAME=
KUBECTL_PLUGINS_GLOBAL_FLAG_CLIENT_KEY=
KUBECTL_PLUGINS_GLOBAL_FLAG_REQUEST_TIMEOUT=0
KUBECTL_PLUGINS_LOCAL_FLAG_HELP=false
KUBECTL_PLUGINS_GLOBAL_FLAG_STDERRTHRESHOLD=2
KUBECTL_PLUGINS_GLOBAL_FLAG_CERTIFICATE_AUTHORITY=
KUBECTL_PLUGINS_DESCRIPTOR_LONG_DESC=
KUBECTL_PLUGINS_CALLER=/usr/local/bin/kubectl
KUBECTL_PLUGINS_GLOBAL_FLAG_ALSOLOGTOSTDERR=false
KUBECTL_PLUGINS_GLOBAL_FLAG_AS=
KUBECTL_PLUGINS_GLOBAL_FLAG_LOG_DIR=
KUBECTL_PLUGINS_GLOBAL_FLAG_V=0
KUBECTL_PLUGINS_GLOBAL_FLAG_CONTEXT=
KUBECTL_PLUGINS_DESCRIPTOR_EXAMPLE=
KUBECTL_PLUGINS_GLOBAL_FLAG_MATCH_SERVER_VERSION=false
KUBECTL_PLUGINS_GLOBAL_FLAG_SERVER=
KUBECTL_PLUGINS_GLOBAL_FLAG_LOG_BACKTRACE_AT=:0
KUBECTL_PLUGINS_LOCAL_FLAG_FOO=bar
KUBECTL_PLUGINS_GLOBAL_FLAG_LOGTOSTDERR=true
KUBECTL_PLUGINS_CURRENT_NAMESPACE=default
KUBECTL_PLUGINS_GLOBAL_FLAG_INSECURE_SKIP_TLS_VERIFY=false
KUBECTL_PLUGINS_LOCAL_FLAG_OUTPUT=json
KUBECTL_PLUGINS_DESCRIPTOR_SHORT_DESC=I echo all the flags that have been passed to my plugin as environment variables
KUBECTL_PLUGINS_DESCRIPTOR_COMMAND=bash -c env
KUBECTL_PLUGINS_GLOBAL_FLAG_NAMESPACE=
KUBECTL_PLUGINS_GLOBAL_FLAG_LOG_FLUSH_FREQUENCY=5s
KUBECTL_PLUGINS_GLOBAL_FLAG_USER=
KUBECTL_PLUGINS_GLOBAL_FLAG_VMODULE=
KUBECTL_PLUGINS_DESCRIPTOR_NAME=flags
```

## Build the plugin
```console
$ make deploy
mkdir -p ~/.kube/plugins/flags
cp plugin.yaml ~/.kube/plugins/flags/
```
